\hypertarget{zumpy_8py_source}{}\doxysection{zumpy.\+py}
\label{zumpy_8py_source}\index{src/python/zumpy.py@{src/python/zumpy.py}}
\mbox{\hyperlink{zumpy_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00001}\mbox{\hyperlink{namespacezumpy}{00001}} \textcolor{comment}{\# python binding for libZumpy.so}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00002}00002 \textcolor{keyword}{from} ctypes \textcolor{keyword}{import} *}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00003}00003 \textcolor{keyword}{import} faulthandler}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00005}00005 \textcolor{comment}{\# load library}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00006}00006 \_libZumpy = CDLL(\textcolor{stringliteral}{'./ext/libZumpy.so'})}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00008}00008 \textcolor{comment}{\# wrapper class}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00009}\mbox{\hyperlink{classzumpy_1_1array__wrapper}{00009}} \textcolor{keyword}{class }\mbox{\hyperlink{classzumpy_1_1array__wrapper}{array\_wrapper}}(Structure):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00010}00010     \_fields\_ = [}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00011}00011         (\textcolor{stringliteral}{"{}data"{}}, c\_void\_p),}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00012}00012         (\textcolor{stringliteral}{"{}arr\_shape"{}}, POINTER(c\_size\_t)),}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00013}00013         (\textcolor{stringliteral}{"{}shape\_size"{}}, c\_size\_t),}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00014}00014         (\textcolor{stringliteral}{"{}type\_size"{}}, c\_size\_t),}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00015}00015         (\textcolor{stringliteral}{"{}total\_size"{}}, c\_size\_t),}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00016}00016         (\textcolor{stringliteral}{"{}type"{}}, c\_uint)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00017}00017     ]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00019}00019 \textcolor{comment}{\# function prototypes}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00020}\mbox{\hyperlink{classzumpy_1_1array__wrapper_a794bf36bbaf2e3d33108de3e24e98ebf}{00020}} \_libZumpy.arr\_init.argtypes = [POINTER(array\_wrapper), POINTER(c\_size\_t), c\_size\_t, c\_size\_t]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00021}\mbox{\hyperlink{classzumpy_1_1array__wrapper_af77b06219b0954a28dd750dcb803f2f0}{00021}} \_libZumpy.arr\_init.restype = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00023}00023 \_libZumpy.arr\_free.argtypes = [POINTER(array\_wrapper)]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00024}00024 \_libZumpy.arr\_free.restype = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00026}00026 \_libZumpy.arr\_at.argtypes = [POINTER(array\_wrapper), POINTER(c\_size\_t)]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00027}00027 \_libZumpy.arr\_at.restype = c\_void\_p}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00029}00029 \_libZumpy.arr\_set.argtypes = [POINTER(array\_wrapper), POINTER(c\_size\_t), c\_void\_p]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00030}00030 \_libZumpy.arr\_set.restype = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00032}00032 \_libZumpy.arr\_fill.argtypes = [POINTER(array\_wrapper), c\_void\_p]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00033}00033 \_libZumpy.arr\_fill.restype = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00035}00035 \_libZumpy.arr\_sum.argtypes = [POINTER(array\_wrapper)]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00036}00036 \_libZumpy.arr\_sum.restype = c\_float}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00038}00038 \_libZumpy.arr\_slice.argtypes = [POINTER(array\_wrapper), POINTER(POINTER(c\_size\_t)), POINTER(c\_size\_t), c\_size\_t, POINTER(array\_wrapper)]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00039}00039 \_libZumpy.arr\_slice.restype = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00041}00041 \_libZumpy.arr\_print.argtypes = [POINTER(array\_wrapper)]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00042}00042 \_libZumpy.arr\_slice.restype = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00044}00044 \_libZumpy.arr\_filter.argtypes = [POINTER(array\_wrapper), CFUNCTYPE(c\_bool, c\_void\_p), POINTER(c\_size\_t), c\_size\_t, c\_uint, POINTER(array\_wrapper)]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00045}00045 \_libZumpy.arr\_filter.restype = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00049}\mbox{\hyperlink{classzumpy_1_1array}{00049}} \textcolor{keyword}{class }\mbox{\hyperlink{classzumpy_1_1array}{array}}():}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00050}00050     \textcolor{keyword}{def }\_get\_type\_enum(self, dtype):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00051}00051         \textcolor{keywordflow}{if} dtype == \textcolor{stringliteral}{'int32'}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00052}00052             \textcolor{keywordflow}{return} 0}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00053}00053         \textcolor{keywordflow}{elif} dtype == \textcolor{stringliteral}{'float'}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00054}00054             \textcolor{keywordflow}{return} 1}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00056}\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{00056}}     arr = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00057}\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{00057}}     dtype = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00058}\mbox{\hyperlink{classzumpy_1_1array_afdaf3dde3cb78b65b6e7f59528abc20d}{00058}}     shape = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00060}00060     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00073}\mbox{\hyperlink{classzumpy_1_1array_a31f441747441e1746a66e1be537fc760}{00073}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_a31f441747441e1746a66e1be537fc760}{create}}(self, shape, dtype = 'int32'):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00075}00075         self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}} = \mbox{\hyperlink{classzumpy_1_1array__wrapper}{array\_wrapper}}()}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00076}00076         self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}} = dtype}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00077}00077         self.\mbox{\hyperlink{classzumpy_1_1array_afdaf3dde3cb78b65b6e7f59528abc20d}{shape}} = shape}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00078}00078 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00079}00079         arr\_ptr = pointer(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}})}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00081}00081         shape\_size = len(self.\mbox{\hyperlink{classzumpy_1_1array_afdaf3dde3cb78b65b6e7f59528abc20d}{shape}})}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00082}00082         shape\_arr = (c\_size\_t * len(self.\mbox{\hyperlink{classzumpy_1_1array_afdaf3dde3cb78b65b6e7f59528abc20d}{shape}}))(*self.\mbox{\hyperlink{classzumpy_1_1array_afdaf3dde3cb78b65b6e7f59528abc20d}{shape}})}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00084}00084         type\_enum = self.\mbox{\hyperlink{classzumpy_1_1array_a1fe47eea8761e420d9af3e1471acd8e7}{\_get\_type\_enum}}(self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}})}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00085}00085 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00086}00086         \_libZumpy.arr\_init(arr\_ptr, shape\_arr, shape\_size, type\_enum)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00088}00088     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00100}\mbox{\hyperlink{classzumpy_1_1array_adbebcc1aa4ab815fe751794644c8a6dc}{00100}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_adbebcc1aa4ab815fe751794644c8a6dc}{\_\_init\_\_}}(self, shape = None, dtype = 'int32'):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00101}00101         \textcolor{keywordflow}{if} shape != \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00102}00102             self.\mbox{\hyperlink{classzumpy_1_1array_a31f441747441e1746a66e1be537fc760}{create}}(shape, dtype)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00103}00103 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00104}00104     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00106}\mbox{\hyperlink{classzumpy_1_1array_ae78e08f3b69789fe1a8707320f0ea88b}{00106}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_ae78e08f3b69789fe1a8707320f0ea88b}{\_\_del\_\_}}(self):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00107}00107         arr\_ptr = pointer(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}})}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00108}00108         \_libZumpy.arr\_free(arr\_ptr)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00109}00109 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00110}00110     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00118}\mbox{\hyperlink{classzumpy_1_1array_ad632d721d67924cea3552fc66d689fc3}{00118}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_ad632d721d67924cea3552fc66d689fc3}{\_\_str\_\_}}(self):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00119}00119         arr\_ptr = pointer(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}})}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00120}00120         \_libZumpy.arr\_print(arr\_ptr)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00121}00121         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00122}00122 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00123}00123     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00131}\mbox{\hyperlink{classzumpy_1_1array_ae46c039a60f0186ea5252077daca04cd}{00131}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_ae46c039a60f0186ea5252077daca04cd}{\_\_repr\_\_}}(self):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00132}00132         self.\mbox{\hyperlink{classzumpy_1_1array_ad632d721d67924cea3552fc66d689fc3}{\_\_str\_\_}}()}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00133}00133 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00134}00134     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00145}\mbox{\hyperlink{classzumpy_1_1array_a553ea0c0e9dc241e6d8487c2a13f7ff7}{00145}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_a553ea0c0e9dc241e6d8487c2a13f7ff7}{at}}(self, idx):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00146}00146         temp\_idx = []}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00147}00147         \textcolor{keywordflow}{if} isinstance(idx, int):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00148}00148             temp\_idx.append(idx)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00149}00149         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00150}00150             temp\_idx = idx}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00151}00151 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00152}00152         idx\_arr = (c\_size\_t * len(temp\_idx))(*temp\_idx)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00153}00153         \textcolor{comment}{\# dereference different types}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00154}00154         \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}} == \textcolor{stringliteral}{'int32'}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00155}00155             \textcolor{keywordflow}{return} cast(cast(\_libZumpy.arr\_at(byref(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}}), idx\_arr), c\_void\_p), POINTER(c\_int32)).contents.value}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00156}00156         \textcolor{keywordflow}{elif} self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}} == \textcolor{stringliteral}{'float'}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00157}00157             \textcolor{keywordflow}{return} cast(cast(\_libZumpy.arr\_at(byref(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}}), idx\_arr), c\_void\_p), POINTER(c\_float)).contents.value}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00158}00158 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00159}00159         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00160}00160 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00161}00161     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00173}\mbox{\hyperlink{classzumpy_1_1array_ad4814f336c60d790f7207a56ddef4d26}{00173}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_ad4814f336c60d790f7207a56ddef4d26}{\_\_getitem\_\_}}(self, idx):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00174}00174         temp\_idx = []}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00175}00175         \textcolor{keywordflow}{if} isinstance(idx, int):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00176}00176             temp\_idx.append(idx)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00177}00177         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00178}00178             temp\_idx = idx}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00179}00179         \textcolor{keywordflow}{return} self.\mbox{\hyperlink{classzumpy_1_1array_a553ea0c0e9dc241e6d8487c2a13f7ff7}{at}}(temp\_idx)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00180}00180 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00181}00181     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00192}\mbox{\hyperlink{classzumpy_1_1array_a33fbbdf3d32fee45a109ee0005c53e29}{00192}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_a33fbbdf3d32fee45a109ee0005c53e29}{set}}(self, idx, value):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00193}00193         temp\_idx = []}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00194}00194         \textcolor{keywordflow}{if} isinstance(idx, int):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00195}00195             temp\_idx.append(idx)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00196}00196         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00197}00197             temp\_idx = idx}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00198}00198 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00199}00199         idx\_arr = (c\_size\_t * len(idx))(*idx)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00200}00200 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00201}00201         \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}} == \textcolor{stringliteral}{'int32'}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00202}00202             \_libZumpy.arr\_set(byref(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}}), idx\_arr, byref(c\_int32(value)))}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00203}00203         \textcolor{keywordflow}{elif} self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}} == \textcolor{stringliteral}{'float'}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00204}00204             \_libZumpy.arr\_set(byref(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}}), idx\_arr, byref(c\_float(value)))}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00205}00205 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00206}00206     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00217}\mbox{\hyperlink{classzumpy_1_1array_a7baa203a5cfc156c6e8ba31f4391aa71}{00217}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_a7baa203a5cfc156c6e8ba31f4391aa71}{\_\_setitem\_\_}}(self, idx, value):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00218}00218         temp\_idx = []}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00219}00219         \textcolor{keywordflow}{if} isinstance(idx, int):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00220}00220             temp\_idx.append(idx)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00221}00221         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00222}00222             temp\_idx = idx}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00223}00223         self.\mbox{\hyperlink{classzumpy_1_1array_a33fbbdf3d32fee45a109ee0005c53e29}{set}}(temp\_idx, value)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00224}00224 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00225}00225     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00238}\mbox{\hyperlink{classzumpy_1_1array_a3f4ae62feb6ff6825c7dad2e6fffc15f}{00238}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_a3f4ae62feb6ff6825c7dad2e6fffc15f}{fill}}(self, value):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00239}00239         val\_ptr = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00240}00240         \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}} == \textcolor{stringliteral}{'int32'}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00241}00241             val\_ptr = cast(byref(c\_int32(value)), c\_void\_p)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00242}00242         \textcolor{keywordflow}{elif} self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}} == \textcolor{stringliteral}{'float'}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00243}00243             val\_ptr = cast(byref(c\_float(value)), c\_void\_p)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00244}00244         \_libZumpy.arr\_fill(byref(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}}), val\_ptr)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00245}00245 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00246}00246     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00332}\mbox{\hyperlink{classzumpy_1_1array_a9ada4e84da6fe2e94411cf1ff1dde739}{00332}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_a9ada4e84da6fe2e94411cf1ff1dde739}{slice}}(self, slice\_indices):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00333}00333         \textcolor{comment}{\# slice indices should be a list of lists}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00334}00334         \textcolor{comment}{\# convert slice\_indices to size\_t** (pointer to pointer of size\_t)}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00335}00335         arr\_inner = []}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00336}00336         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(slice\_indices)):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00337}00337             arr\_inner.append((c\_size\_t * len(slice\_indices[i]))(*slice\_indices[i]))}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00338}00338 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00339}00339         arr\_outer = []}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00340}00340         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(arr\_inner)):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00341}00341             arr\_outer.append(arr\_inner[i])}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00342}00342 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00343}00343         pp\_slice\_indices = (POINTER(c\_size\_t) * len(arr\_outer))(*arr\_outer)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00344}00344 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00345}00345         slice\_idx\_len = len(slice\_indices)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00346}00346         slice\_dims = []}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00347}00347         \textcolor{keywordflow}{for} idx \textcolor{keywordflow}{in} slice\_indices:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00348}00348             slice\_dims.append(len(idx))}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00349}00349 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00350}00350         ref\_arr = \mbox{\hyperlink{classzumpy_1_1array__wrapper}{array\_wrapper}}()}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00351}00351         p\_slice\_dims = (c\_size\_t * len(slice\_dims))(*slice\_dims)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00352}00352         \_libZumpy.arr\_slice(byref(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}}), pp\_slice\_indices, p\_slice\_dims, c\_size\_t(slice\_idx\_len), byref(ref\_arr))}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00353}00353 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00354}00354         ret\_arr = \mbox{\hyperlink{classzumpy_1_1array}{array}}(slice\_dims, self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}})}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00355}00355         ret\_arr.arr = ref\_arr}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00356}00356 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00357}00357         \textcolor{keywordflow}{return} ret\_arr}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00358}00358 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00359}00359     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00427}\mbox{\hyperlink{classzumpy_1_1array_a1826da0ec98ad0ceb7acbe81a6334a88}{00427}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_a1826da0ec98ad0ceb7acbe81a6334a88}{filter}}(self, filter\_func, secondary\_indices, filter\_type):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00428}00428         proto\_filter\_func = CFUNCTYPE(c\_bool, c\_void\_p)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00429}00429         p\_filter\_func = proto\_filter\_func(filter\_func)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00430}00430 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00431}00431         p\_secondary\_indices = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00432}00432         \textcolor{keywordflow}{if} len(secondary\_indices) != 0:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00433}00433             p\_secondary\_indices = (c\_size\_t * len(secondary\_indices))(*secondary\_indices)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00434}00434 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00435}00435         ftype = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00436}00436         \textcolor{keywordflow}{if} (filter\_type == \textcolor{stringliteral}{'ANY'}):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00437}00437             ftype = 0}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00438}00438         \textcolor{keywordflow}{elif} (filter\_type == \textcolor{stringliteral}{'ALL'}):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00439}00439             ftype = 1}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00440}00440 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00441}00441         dest\_arr = \mbox{\hyperlink{classzumpy_1_1array__wrapper}{array\_wrapper}}()}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00442}00442 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00443}00443         \_libZumpy.arr\_filter(byref(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}}), p\_filter\_func, p\_secondary\_indices, c\_size\_t(len(secondary\_indices)), c\_uint(ftype), byref(dest\_arr))}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00444}00444 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00445}00445         \textcolor{comment}{\# grab contents from struct pointer and convert array}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00446}00446         \textcolor{comment}{\# shape into Python list}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00447}00447         \_shape\_size = pointer(dest\_arr).contents.shape\_size}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00448}00448         \_arr\_shape = pointer(dest\_arr).contents.arr\_shape}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00449}00449         \_total\_size = pointer(dest\_arr).contents.total\_size}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00450}00450         \_arr\_shape\_list = []}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00451}00451         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(\_shape\_size):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00452}00452             \_arr\_shape\_list.append(\_arr\_shape[i])}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00453}00453         ret\_arr = \mbox{\hyperlink{classzumpy_1_1array}{array}}(\_arr\_shape\_list, self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}})}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00454}00454         ret\_arr.arr = dest\_arr}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00455}00455 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00456}00456         \textcolor{comment}{\# return NULL if filter returned no results}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00457}00457         \textcolor{keywordflow}{if} \_total\_size == 0:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00458}00458             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00459}00459         \textcolor{keywordflow}{return} ret\_arr}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00460}00460 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00461}00461     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00499}\mbox{\hyperlink{classzumpy_1_1array_acd585c976dbc21e9e1782fbff6684bc1}{00499}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_acd585c976dbc21e9e1782fbff6684bc1}{sum}}(self):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00500}00500         \textcolor{keywordflow}{return} \_libZumpy.arr\_sum(byref(self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}}))}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00501}00501 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00502}00502     \textcolor{keyword}{def }\_\_get\_list\_shape(self, \_list, shape = []):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00503}00503         \textcolor{keywordflow}{if} (isinstance(\_list, list)):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00504}00504             shape.append(len(\_list))}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00505}00505 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00506}00506         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00507}00507             \textcolor{keywordflow}{if} (isinstance(\_list[0], list)):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00508}00508                 \textcolor{keywordflow}{return} self.\mbox{\hyperlink{classzumpy_1_1array_af3e329e59425acf4c2fd8ccc197c8609}{\_\_get\_list\_shape}}(\_list[0])}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00509}00509             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00510}00510                 \textcolor{keywordflow}{return} shape}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00511}00511         \textcolor{keywordflow}{except}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00512}00512             \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00513}00513 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00514}00514     \textcolor{comment}{\# a replica of the C implementation to get all index}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00515}00515     \textcolor{comment}{\# combinations from a particular array shape.}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00516}00516     \textcolor{comment}{\# this is then used to set the values from the python list}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00517}00517     \textcolor{comment}{\# to the appropriate indices in the array.}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00518}00518     \textcolor{keyword}{def }\_\_get\_index\_combinations(self, shape):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00519}00519         current\_idx = [0] * len(shape)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00520}00520         idx\_list = []}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00521}00521 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00522}00522         \textcolor{keywordflow}{while} \textcolor{keyword}{True}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00523}00523             idx\_list.append(current\_idx.copy())}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00524}00524             current\_idx[len(current\_idx)-\/1] += 1}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00525}00525 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00526}00526             \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} reversed(range(len(shape))):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00527}00527                 \textcolor{keywordflow}{if} current\_idx[i] >= shape[i]:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00528}00528                     current\_idx[i] = 0}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00529}00529                     \textcolor{keywordflow}{if} i == 0:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00530}00530                         \textcolor{keywordflow}{break}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00531}00531                     current\_idx[i-\/1] += 1}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00532}00532 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00533}00533             \textcolor{keywordflow}{if} \mbox{\hyperlink{classzumpy_1_1array_acd585c976dbc21e9e1782fbff6684bc1}{sum}}(current\_idx) == 0:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00534}00534                 \textcolor{keywordflow}{break}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00535}00535 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00536}00536         \textcolor{keywordflow}{return} idx\_list}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00537}00537 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00538}00538     \textcolor{comment}{\# this mimics the functionality of "{}calculate offset"{}}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00539}00539     \textcolor{comment}{\# from C implementation. It will allow you to access an element}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00540}00540     \textcolor{comment}{\# of a multidimensional list by passing the (reversed) indices}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00541}00541     \textcolor{comment}{\# as a list such as [2,1,1]}}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00542}00542     \textcolor{keyword}{def }\_\_elem\_at(self, \_list, idx):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00543}00543         val = idx.pop()}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00544}00544         \textcolor{keywordflow}{if} isinstance(\_list[val], list):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00545}00545             \textcolor{keywordflow}{return} self.\mbox{\hyperlink{classzumpy_1_1array_a792d23d7f912b6df8a391014a036c1d4}{\_\_elem\_at}}(\_list[val], idx)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00546}00546         \textcolor{keywordflow}{return} \_list[val]}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00547}00547 }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00548}00548     }
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00580}\mbox{\hyperlink{classzumpy_1_1array_aa2e2048f07cb9ea15612633f4b924e01}{00580}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzumpy_1_1array_aa2e2048f07cb9ea15612633f4b924e01}{to\_array}}(self, list\_arr, dtype = 'int32'):}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00581}00581         list\_arr\_shape = self.\mbox{\hyperlink{classzumpy_1_1array_af3e329e59425acf4c2fd8ccc197c8609}{\_\_get\_list\_shape}}(list\_arr)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00582}00582         \textcolor{keywordflow}{if} list\_arr\_shape != \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00583}00583             self.\mbox{\hyperlink{classzumpy_1_1array_afdaf3dde3cb78b65b6e7f59528abc20d}{shape}} = list\_arr\_shape}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00584}00584             self.\mbox{\hyperlink{classzumpy_1_1array_a7feba772b5e2611621ea9fea5a7ef59f}{dtype}} = dtype}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00585}00585             self.\mbox{\hyperlink{classzumpy_1_1array_a222b68787d02af14efac3f0297486c5d}{arr}} = \mbox{\hyperlink{classzumpy_1_1array__wrapper}{array\_wrapper}}()}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00586}00586             self.\mbox{\hyperlink{classzumpy_1_1array_a31f441747441e1746a66e1be537fc760}{create}}(list\_arr\_shape, dtype)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00587}00587             idx\_list = self.\mbox{\hyperlink{classzumpy_1_1array_aeca892392678afa78b4b446b65528d2a}{\_\_get\_index\_combinations}}(list\_arr\_shape)}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00588}00588             \textcolor{keywordflow}{for} idx \textcolor{keywordflow}{in} idx\_list:}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00589}00589                 r\_idx = list(reversed(idx))}
\DoxyCodeLine{\Hypertarget{zumpy_8py_source_l00590}00590                 self.\mbox{\hyperlink{classzumpy_1_1array_a33fbbdf3d32fee45a109ee0005c53e29}{set}}(idx, self.\mbox{\hyperlink{classzumpy_1_1array_a792d23d7f912b6df8a391014a036c1d4}{\_\_elem\_at}}(list\_arr, r\_idx))}

\end{DoxyCode}
